var ktj = { 
	j: "https://alog.kuaiyq.com/a/v1/track", 
	o: "ktj", 
	a: "2.0.3", 
	r: "", 
	d: "", 
	h: "", 
	_: "", 
	l: "", 
	g: "", 
	w: "", 
	m: "", 
	x: "", 
	I: "", 
	y: "", 
	A: "", 
	networkType: "", 
	T: {}, 
	P: {}, 
	userInfo: {}, 
	S: null, 
	U: null, 
	D: null, 
	H: "", 
	O: 0, 
	L: 0, 
	K: !1, 
	M: ["_ktj_apperror", "_ktj_pageload", "_ktj_pageshow", "_ktj_pageexit"], 
	init: function(t) { 
		this.F = t, 
		this.x = this.b(), 
		this.S = Date.now(), 
		this.C(), this.J(), 
		this.N() 
	}, 
	disableAntiFraudDetection: function() { 
		this.K = !0 
	}, 
	R: function() {
        return this.d 
    }, 
    C: function() {
        if (void 0 != wx.navigateToMiniProgram) {
            var t = wx.navigateToMiniProgram;
        Object.defineProperty(wx, "navigateToMiniProgram", { value: function() {
                    var n = arguments[0];
                    return ktj.q(n, "success", function() {
                        var t = ktj.V({ 
                        	e: "_ktj_tomp", 
                        	p: { ai: n.appId, pt: n.path, ed: n.extraData }, 
                        	u: ktj.userInfo
                        });
                        ktj.B(t) 
                    }), 
                    t.apply(wx, arguments)
        }, writable: !1 }) } }, 
    N: function() {
        var t = this,
            n = App;
        App = function(i) { 
        	t.q(i, "onLaunch", t.G), 
        	t.q(i, "onShow", t.Q), 
        	t.q(i, "onHide", t.X), 
        	t.q(i, "onError", t.Y), 
        	n(i) 
        };
        var i = Page;
        Page = function(n) { 
        	t.q(n, "onLoad", t.z), 
        	t.q(n, "onShow", t.W), 
        	t.q(n, "onHide", t.Z), 
        	t.q(n, "onUnload", t.Z), 
        	void 0 !== n.onShareAppMessage && t.$(n, "onShareAppMessage", t.tt), i(n) 
        } 
    }, 
    q: function(t, n, i) {
        if (t[n]) {
            var k = t[n];
            t[n] = function() { 
            	i.apply(this, arguments), 
            	k.apply(this, arguments) 
            } 
        } else t[n] = function() { 
        	i.apply(this, arguments) 
        } 
    }, 
    $: function(t, n, i) {
        if (t[n]) {
            var k = t[n];
            t[n] = function(t) {
                var n = k.call(this, t);
                return i.call(this, t, n), n 
            } 
        } else t[n] = function(t) { 
        	i.call(this, t) 
        } 
    }, 
    G: function(t) {
        if (void 0 !== t) {
            if (this.ktongji = ktj, 
            	ktj.H = "launch", 
            	ktj.T = t, 
            	ktj.I = t.path, 
            	ktj.nt(t), 
            	t.referrerInfo && t.referrerInfo.extraData
            ) {
                var n = t.referrerInfo.extraData;
                t.referrerInfo.extraData = "string" == typeof n ? JSON.parse(n) : n 
            }
            if (ktj.h = ktj.it("ktj_src"), "" == ktj.h) {
                if (void 0 !== t.query.ktj_src) ktj.h = t.query.ktj_src;
                else if (t.referrerInfo) { 
                	n = t.referrerInfo.extraData;
                    t.referrerInfo.extraData && n.ktj_src ? ktj.h = n.ktj_src : t.referrerInfo.appId && (ktj.h = t.referrerInfo.appId) } "" != ktj.h && ktj.kt("ktj_src", ktj.h) } else t.query.ktj_fsrc && (ktj.h = t.query.ktj_src, ktj.kt("ktj_src", ktj.h));
            var i = function() { 
            	wx.getNetworkType({ 
            		success: function(t) { 
            			ktj.networkType = t.networkType 
            		}, complete: k 
            	}) 
            },
            k = function(t) { 
            	wx.getSetting && wx.getSetting({ 
            		success: function(t) { 
            			t.authSetting["scope.userInfo"] ? 
            			wx.getUserInfo({ withCredentials: !1, fail: function() {}, success: function(t) { ktj.et(t.userInfo), ktj.jt() } }) : ktj.jt() } }) };
            wx.getSystemInfo({ success: function(t) { ktj.P.dv = void 0 === t.SDKVersion ? "1.0.0" : t.SDKVersion, ktj.P.md = t.model, ktj.P.po = t.pixelRatio, ktj.P.ww = t.windowWidth, ktj.P.wh = t.windowHeight, ktj.P.lg = t.language, ktj.P.wv = t.version, ktj.P.sv = t.system, ktj.P.pf = t.platform }, complete: i }) } }, Q: function(t) {
        if (void 0 !== t) { ktj.H = "appshow", ktj.U = Date.now();
            var n = ktj.V({ e: "_ktj_appshow", p: ktj.ot(t) });
            ktj.B(n) } }, X: function() {
        if (ktj.L = Date.now(), "shareapp" != ktj.H) {
            var t = ktj.V({ e: "_ktj_apphide", p: { du: ktj.L - ktj.S, sdu: ktj.L - ktj.U } });
            ktj.B(t) }
        ktj.H = "apphide" }, Y: function(t) {
        var n = ktj.V({ e: "_ktj_apperror", p: { em: t }, u: ktj.userInfo, si: ktj.P });
        ktj.B(n) }, z: function(t) { ktj.y = this.route;
        var n = ktj.V({ pp: ktj.A, e: "_ktj_pageload", ep: t });
        ktj.B(n) }, W: function() { this.at = Date.now(), ktj.y = this.route;
        var t = ktj.V({ pp: ktj.A, e: "_ktj_pageshow" });
        ktj.B(t) }, Z: function() { ktj.A = ktj.y;
        var t = ktj.V({ e: "_ktj_pageexit", p: { du: Date.now() - this.at } });
        ktj.B(t) }, tt: function(t, n) {
        if (ktj.H = "shareapp", ktj.O = Date.now(), void 0 === n) return;
        var i = "";
        i = "" === ktj.h ? ktj.d : ktj.h;
        const k = ktj.b(); - 1 != n.path.indexOf("?") ? n.path += "&ktj_src=" + i + "&ktj_fuid=" + ktj.d + "&ktj_srid=" + k : n.path += "?ktj_src=" + i + "&ktj_fuid=" + ktj.d + "&ktj_srid=" + k;
        var e = ktj.V({ e: "_ktj_shareapp", p: { c: i, srid: k } });
        return ktj.B(e), n }, J: function() { this.d || (this.d = ktj.it("ktj_uid"), this.d || (ktj.d = ktj.b(), ktj.kt("ktj_uid", ktj.d))) }, trackNavigateToMiniProgram: function(t) {
        var n = ktj.V({ e: "_ktj_tomp", p: { ai: t.appId, pt: t.path, ed: t.extraData }, u: ktj.userInfo });
        void 0 !== t.openId && (n.p.oi = t.openId), ktj.B(n) }, jt: function() {
        var t = ktj.V({ lp: ktj.I, e: "_ktj_launch", p: ktj.ot(ktj.T), u: ktj.userInfo, si: ktj.P });
        this.B(t) }, V: function(t) {
        var n = { k: ktj.F, t: ktj.o, v: ktj.a, s: ktj.x, i: ktj.d, cp: ktj.y, n: ktj.networkType, ts: Date.now() };
        return "" != ktj.h && (n.c = ktj.h), "" != ktj.g && (n.f = ktj.g), "" != ktj.l && (n.fo = ktj.l), "" != ktj._ && (n.fu = ktj._), "" != ktj.w && (n.srid = ktj.w), Object.assign(t, n) }, B: function(t) {
        if (!this.K || -1 == this.M.indexOf(t.e)) {
            var n = 0,
                i = function() { n += 1, t.tc = n, wx.request({ url: ktj.j, header: { "X-KYQ-SDK": "KTJ " + ktj.a + " " + ktj.F, "Content-Type": "application/json" }, data: t, method: "POST", success: function() {}, fail: function() { n < 2 && (t.tc = n, i()) } }) };
            i() } }, et: function(t) { this.userInfo.nn = t.nickName, this.userInfo.gd = t.gender, this.userInfo.lg = t.language, this.userInfo.cy = t.city, this.userInfo.pe = t.province, this.userInfo.ct = t.country, this.userInfo.au = t.avatarUrl }, nt: function(t) { ktj.g = ktj.it("ktj_fuid"), ktj.w = ktj.it("ktj_srid"), t.query.openid && (ktj.l = t.query.openid), t.query.ktj_uid && (ktj._ = t.query.ktj_uid), "" == ktj.g && (void 0 !== t.query.ktj_fuid && t.query.ktj_fuid != ktj._ && (ktj.g = t.query.ktj_fuid), "" != ktj.g && ktj.kt("ktj_fuid", ktj.g)), "" == ktj.w && (void 0 !== t.query.ktj_srid && (ktj.w = t.query.ktj_srid), "" != ktj.w && ktj.kt("ktj_srid", ktj.w)) }, ot: function(t) {
        var n = { pt: t.path, qy: t.query, sn: t.scene };
        return t.shareTicket && (n.st = t.shareTicket), t.referrerInfo && (n.ri = { ai: t.referrerInfo.appId, ed: t.referrerInfo.extraData }), n }, it: function(t) {
        var n = "";
        try { n = wx.getStorageSync(t) } catch (t) {}
        return n }, kt: function(t, n) {
        try { wx.setStorageSync(t, n) } catch (i) { wx.setStorage({ key: t, data: n, success: function() {}, fail: function() {} }) } }, b: function() {
        return "" + (new Date).getTime() + Math.floor(1e8 * (1 + Math.random())) }, extractParams: function(t) {
        var n = {};
        let i = t.split("?")[1];
        return void 0 !== i && i.split("&").forEach(function(t) {
            var i = t.split("=");
            n[i[0]] = decodeURIComponent(i[1]) }), n }, appendUserIdToPath: function(t) {
        return -1 != t.indexOf("?") ? t += "&ktj_uid=" + ktj.d : t += "?ktj_uid=" + ktj.d, t } };
module.exports = ktj;
